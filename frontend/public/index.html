<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8"><title>AI4Pi Partial Test</title>
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<style>body{font-family:sans-serif;text-align:center;margin:2em}button{margin:.5em;padding:.6em 1em;border:none;border-radius:4px;background:#333;color:#fff;cursor:pointer}button:hover{background:#555}#status{margin-bottom:.5em}#chatBox{border:1px solid #ccc;height:200px;overflow-y:auto;padding:.5em;margin:1em auto;max-width:400px;text-align:left}#chatInput{width:70%;padding:.4em}</style>
</head><body>
<h1>AI4Pi Partial Test</h1>
<div id="status">Unregistered User</div>
<button onclick="login()">Login with Pi</button>
<button onclick="pay()">Pay 3.14 Pi</button>
<div id="chatBox"></div>
<input id="chatInput" placeholder="Type message..."><button onclick="send()">Send</button>
<script>
const SANDBOX=true;let user=null;
onload=()=>Pi.init({version:"2.0",sandbox:SANDBOX});
function mockHash(){let s="0x";for(let i=0;i<16;i++)s+=(Math.floor(Math.random()*16)).toString(16);return s;}
function login(){
  alert("Initiating Pi login...");
  Pi.authenticate(["username"],a=>{
    if(!a.user){alert("Login failed.");user=null;status.innerText="Unregistered User";}
    else{alert("Welcome, "+a.user.username);user=a.user.username;status.innerText="Logged in as "+user;}
  },e=>{alert("Login error: "+e);user=null;status.innerText="Unregistered User";});
}
function pay(){
  alert("Initiating Pi payment...");
  Pi.createPayment({amount:3.14,memo:"AI4Pi Payment",metadata:{test:"data"}},{
    onSuccessfulPayment:(p,t)=>alert("Payment success! TxID: "+t),
    onError:e=>alert("Payment error: "+e),
    onPaymentCancel:p=>alert("Payment cancelled: "+p)
  });
  console.log("Partial test hash:",mockHash());
}
function addMsg(s,m){
  let c=chatBox,p=document.createElement("p");
  p.innerHTML="<strong>"+s+":</strong> "+m;c.appendChild(p);c.scrollTop=c.scrollHeight;
}
function send(){
  let v=chatInput.value.trim();if(!v)return;chatInput.value="";
  addMsg("You",v);setTimeout(()=>addMsg("AI","Echo: "+v),800);
}
</script>
</body></html>