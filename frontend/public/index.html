<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI4Pi</title>
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:sans-serif; }
  body { display:grid; grid-template-rows:auto auto 1fr; height:100vh; padding:1em; gap:.5em; background:#f4f4f4; }
  .clock { text-align:center; font-size:1.4em; font-weight:bold; padding:.5em; color:#333; }
  .grid { display:grid; grid-template-columns:repeat(2, 1fr); grid-template-rows:repeat(2, 1fr); gap:.5em; height:100%; }
  .container { display:flex; flex-direction:column; padding:1em; border:5px solid; background:#fff; border-radius:8px; flex-grow:1; justify-content:space-between; box-shadow: 2px 2px 10px rgba(0,0,0,0.1);}
  .box { flex-grow:1; overflow-y:auto; padding:.5em; font-size:small; background:#fff; border-radius:4px; }
  h4 { margin-bottom:.5em; text-align:center; }
  button { margin:.3em 0; padding:.5em; border:none; background:#333; color:#fff; cursor:pointer; border-radius:4px; }
  button:hover { background:#555; }
  input { width:100%; padding:.3em; margin-top:.5em; }
  .rainbow:nth-child(1) { border-image: linear-gradient(45deg, #FF4D4D, #FFAA00, #FFDC00) 1; }
  .rainbow:nth-child(2) { border-image: linear-gradient(45deg, #FFAA00, #FFD700, #66CC66) 1; }
  .rainbow:nth-child(3) { border-image: linear-gradient(45deg, #66CC66, #00AEEF, #0033CC) 1; }
  .rainbow:nth-child(4) { border-image: linear-gradient(45deg, #6699FF, #0033CC, #8A2BE2) 1; }
  #coinDrip { text-align:center; padding:0.5em; font-size:1.2em; font-weight:bold; color:#DAA520; }
</style>
</head>
<body>

<!-- Clock Display -->
<div class="clock" id="clock">Loading time...</div>

<!-- Pi Coin Drip & Transfer -->
<div id="coinDrip">
  ðŸ’° Pi Earnings: <span id="piBalance">0</span> Pi
  <button id="sendPi" style="margin-left:10px;">Send to Wallet</button>
</div>

<!-- Main Grid Layout -->
<div class="grid">
  <div class="container rainbow">
    <h4>AI4Pi Chat (AI4Pi Bot)</h4>
    <div id="status">Unregistered User</div>
    <button id="loginBtn">Login with Pi</button>
    <button id="payBtn">Pay 3.14 Pi</button>
    <div class="box" id="chatBox"></div>
    <input id="chatInput" placeholder="Type message...">
    <button id="sendChat">Send</button>
  </div>

  <div class="container rainbow">
    <h4>Gratitude Wall (Motivation Bot)</h4>
    <div class="box" id="gratitudeBox"></div>
    <input id="gratitudeInput" placeholder="What are you thankful for?">
    <button id="submitGratitude">Submit</button>
  </div>

  <div class="container rainbow">
    <h4>Feedback & Suggestions (Pi Solutions Bot)</h4>
    <div class="box" id="feedbackBox"></div>
    <input id="feedbackInput" placeholder="Share your thoughts...">
    <button id="submitFeedback">Submit</button>
  </div>

  <div class="container rainbow">
    <h4>Math Challenge (Math Bot)</h4>
    <div class="box" id="mathBox">Solve: <span id="mathProblem">0 + 0</span></div>
    <input id="mathInput" placeholder="Answer...">
    <button id="submitMath">Submit</button>
  </div>
</div>

<script>
const SANDBOX=true, dripRate=0.01, mathBonus=0.05;
let user=null, piBalance=0, currentAnswer=0, lastWinner=null;
onload=()=>Pi.init({ version:"2.0", sandbox:SANDBOX });

// Update Clock
setInterval(() => {
  document.getElementById("clock").innerText = new Date().toLocaleTimeString();
}, 1000);

// Pi Coin Drip
setInterval(() => {
  piBalance += lastWinner ? dripRate + mathBonus : dripRate;
  document.getElementById("piBalance").innerText = piBalance.toFixed(2);
  lastWinner = null;
}, 10000);

// Send Pi to Testnet Wallet
document.getElementById("sendPi").onclick = () => {
  alert("Sending Pi to Testnet Wallet...");
  Pi.createPayment({ amount:piBalance, memo:"Pi Test Transfer", metadata:{ test:"data" } },
  { onSuccessfulPayment:(p,t)=>alert(`Sent! TxID: ${t}`),
    onError:e=>alert(`Payment error: ${e}`),
    onPaymentCancel:p=>alert(`Transaction cancelled.`) });
};

// Bots' Responses
const chatbotQuestions = ["What's your favorite color?", "What makes you happy?"];
setInterval(() => {
  document.getElementById("chatBox").innerHTML += `<p><strong>AI4Pi Bot:</strong> ${chatbotQuestions[Math.floor(Math.random() * chatbotQuestions.length)]}</p>`;
}, 12000); // Slower rate

const motivationalQuotes = ["Believe in yourself!", "Stay positive, work hard!"];
setInterval(() => {
  document.getElementById("gratitudeBox").innerHTML += `<p><strong>Motivation Bot:</strong> ${motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)]}</p>`;
}, 9000); // Faster response

const piSolutions = ["Pi enables secure transactions.", "Pi builds a Web3 economy."];
setInterval(() => {
  document.getElementById("feedbackBox").innerHTML += `<p><strong>Pi Solutions Bot:</strong> ${piSolutions[Math.floor(Math.random() * piSolutions.length)]}</p>`;
}, 15000); // Slower rate

// Bots Respond to Each Other
setInterval(() => {
  let responses = ["Interesting!", "Tell me more!", "That sounds fun!"];
  document.getElementById("chatBox").innerHTML += `<p><strong>Motivation Bot:</strong> ${responses[Math.floor(Math.random() * responses.length)]}</p>`;
}, 8000);

const generateMathProblem = () => {
  let num1 = Math.floor(Math.random() * 10) + 1;
  let num2 = Math.floor(Math.random() * 10) + 1;
  currentAnswer = num1 + num2;
  document.getElementById("mathProblem").innerText = `${num1} + ${num2}`;
};
setInterval(generateMathProblem, 10000);

document.getElementById("submitMath").onclick = () => {
  const input = document.getElementById("mathInput"), answer = parseInt(input.value.trim());
  if (answer === currentAnswer) {
    document.getElementById("mathBox").innerHTML += `<p><strong>Math Bot:</strong> Correct! ${user ? user : "Anonymous"} gets a Pi boost!</p>`;
    lastWinner = user ? user : "Anonymous";
  } else {
    document.getElementById("mathBox").innerHTML += `<p><strong>Math Bot:</strong> Incorrect, try again!</p>`;
  }
  input.value = "";
};
</script>

</body>
</html>