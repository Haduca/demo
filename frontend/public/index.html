<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI4Pi</title>
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:sans-serif; }
  body { display:grid; grid-template-rows:auto 1fr; height:100vh; padding:1em; gap:.5em; }
  .grid { display:grid; grid-template-columns:repeat(2, 1fr); grid-template-rows:repeat(2, 1fr); gap:.5em; height:100%; }
  .container { display:flex; flex-direction:column; padding:1em; border:5px solid; background:#f9f9f9; border-radius:8px; flex-grow:1; justify-content:space-between; }
  .box { flex-grow:1; overflow-y:auto; padding:.5em; font-size:small; background:#fff; border-radius:4px; }
  h4 { margin-bottom:.5em; text-align:center; }
  button { margin:.3em 0; padding:.5em; border:none; background:#333; color:#fff; cursor:pointer; border-radius:4px; }
  button:hover { background:#555; }
  input { width:100%; padding:.3em; margin-top:.5em; }
  .rainbow:nth-child(1) { border-image: linear-gradient(45deg, #FF4D4D, #FFAA00, #FFDC00) 1; }
  .rainbow:nth-child(2) { border-image: linear-gradient(45deg, #FFAA00, #FFD700, #66CC66) 1; }
  .rainbow:nth-child(3) { border-image: linear-gradient(45deg, #66CC66, #00AEEF, #0033CC) 1; }
  .rainbow:nth-child(4) { border-image: linear-gradient(45deg, #6699FF, #0033CC, #8A2BE2) 1; }
  #coinDrip { text-align:center; padding:0.5em; font-size:1.2em; font-weight:bold; color:#DAA520; }
</style>
</head>
<body>

<!-- Pi Coin Drip -->
<div id="coinDrip">ðŸ’° Pi Earnings: <span id="piBalance">0</span> Pi</div>

<!-- Main Grid Layout -->
<div class="grid">
  <div class="container rainbow">
    <h4>AI4Pi Chat</h4>
    <div id="status">Unregistered User</div>
    <button id="loginBtn">Login with Pi</button>
    <button id="payBtn">Pay 3.14 Pi</button>
    <div class="box" id="chatBox"></div>
    <input id="chatInput" placeholder="Type message...">
    <button id="sendChat">Send</button>
  </div>

  <div class="container rainbow">
    <h4>Gratitude Wall</h4>
    <div class="box" id="gratitudeBox"></div>
    <input id="gratitudeInput" placeholder="What are you thankful for?">
    <button id="submitGratitude">Submit</button>
  </div>

  <div class="container rainbow">
    <h4>Feedback & Suggestions</h4>
    <div class="box" id="feedbackBox"></div>
    <input id="feedbackInput" placeholder="Share your thoughts...">
    <button id="submitFeedback">Submit</button>
  </div>

  <div class="container rainbow">
    <h4>Math Challenge</h4>
    <div class="box" id="mathBox">Solve: <span id="mathProblem">0 + 0</span></div>
    <input id="mathInput" placeholder="Answer...">
    <button id="submitMath">Submit</button>
  </div>
</div>

<script>
const SANDBOX=true, cooldown=5000, dripRate=0.01, mathBonus=0.05;
let user=null, lastMsgTime=0, piBalance=0, currentAnswer=0, lastWinner=null;
onload=()=>Pi.init({ version:"2.0", sandbox:SANDBOX });

// Pi Coin Drip: Adds Pi every 10 seconds, bigger bonus for math winners
setInterval(() => {
  piBalance += lastWinner ? dripRate + mathBonus : dripRate;
  document.getElementById("piBalance").innerText = piBalance.toFixed(2);
  lastWinner = null;
}, 10000);

// Generate new content dynamically
const generateMathProblem = () => {
  let num1 = Math.floor(Math.random() * 10) + 1;
  let num2 = Math.floor(Math.random() * 10) + 1;
  currentAnswer = num1 + num2;
  document.getElementById("mathProblem").innerText = `${num1} + ${num2}`;
};
setInterval(generateMathProblem, 10000);

const chatbotQuestions = [
  "What's your favorite color?",
  "What's your dream job?",
  "If you had a superpower, what would it be?",
  "What is your favorite food?",
  "If you could visit anywhere, where would you go?"
];
setInterval(() => {
  const question = chatbotQuestions[Math.floor(Math.random() * chatbotQuestions.length)];
  document.getElementById("chatBox").innerHTML += `<p><strong>AI:</strong> ${question}</p>`;
}, 8000);

const motivationalQuotes = [
  "Believe in yourself and all that you are.",
  "Your only limit is your mind.",
  "Stay positive, work hard, make it happen.",
  "Success is not final, failure is not fatal.",
  "Dream big and dare to fail."
];
setInterval(() => {
  const quote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
  document.getElementById("gratitudeBox").innerHTML += `<p><strong>Quote:</strong> ${quote}</p>`;
}, 7000);

const piSolutions = [
  "Pi Network provides decentralized transactions.",
  "Pi enables secure, peer-to-peer payments.",
  "Pi aims to build a scalable Web3 ecosystem.",
  "Pi fosters community-driven decentralized applications.",
  "Pi is creating a new digital economy for everyone."
];
setInterval(() => {
  const solution = piSolutions[Math.floor(Math.random() * piSolutions.length)];
  document.getElementById("feedbackBox").innerHTML += `<p><strong>Solution:</strong> ${solution}</p>`;
}, 12000);

const addMessage = (box, sender, text) => {
  document.getElementById(box).innerHTML += `<p><strong>${sender}:</strong> ${text}</p>`;
};

document.getElementById("sendChat").onclick = () => {
  const input = document.getElementById("chatInput"), msg = input.value.trim();
  if (msg) { input.value=""; addMessage("chatBox", "You", msg); }
};

document.getElementById("submitGratitude").onclick = () => {
  const input = document.getElementById("gratitudeInput"), msg = input.value.trim();
  if (msg) { input.value=""; addMessage("gratitudeBox", "Grateful User", msg); }
};

document.getElementById("submitFeedback").onclick = () => {
  const input = document.getElementById("feedbackInput"), msg = input.value.trim();
  if (msg) { input.value=""; addMessage("feedbackBox", "User Feedback", msg); }
};

document.getElementById("submitMath").onclick = () => {
  const input = document.getElementById("mathInput"), answer = parseInt(input.value.trim());
  if (answer === currentAnswer) {
    addMessage("mathBox", "Winner", `Correct! ${user ? user : "Anonymous"} gets a Pi boost!`);
    lastWinner = user ? user : "Anonymous";
  } else {
    addMessage("mathBox", "AI", "Incorrect, try again!");
  }
  input.value = "";
};
</script>

</body>
</html>